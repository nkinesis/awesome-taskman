{"ast":null,"code":"import _classCallCheck from \"/home/gabriel/Documents/Projetos/Angular/TaskManager/client/react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/gabriel/Documents/Projetos/Angular/TaskManager/client/react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/gabriel/Documents/Projetos/Angular/TaskManager/client/react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/gabriel/Documents/Projetos/Angular/TaskManager/client/react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/gabriel/Documents/Projetos/Angular/TaskManager/client/react/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/gabriel/Documents/Projetos/Angular/TaskManager/client/react/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/gabriel/Documents/Projetos/Angular/TaskManager/client/react/src/components/TaskFrame.js\";\nimport React from 'react';\nimport { Database } from '../model/database.js';\nimport { Select } from '../model/select.js';\nimport { TaskList } from './TaskList.js';\nimport { TaskForm } from './TaskForm.js';\nimport { Task } from '../model/task.js';\nimport { Utils } from '../model/utils.js';\nimport '../index.css';\nexport var TaskFrame =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(TaskFrame, _React$Component);\n\n  function TaskFrame(props) {\n    var _this;\n\n    _classCallCheck(this, TaskFrame);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TaskFrame).call(this, props));\n    _this.state = {\n      compName: \"Main\",\n      objList: null,\n      objSelected: null\n    };\n    _this.getTasks = _this.getTasks.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(TaskFrame, [{\n    key: \"getTasks\",\n    value: function getTasks(callback) {\n      var db = new Database();\n      var ctx = this;\n      var params = new Select(\"status = 0\", 10, \"dueDate desc\");\n      db.select(\"Task\", params).then(function (response) {\n        ctx.setState({\n          objList: [response],\n          objSelected: null\n        });\n\n        if (callback) {\n          callback();\n        }\n      });\n    }\n  }, {\n    key: \"setSelected\",\n    value: function setSelected(e) {\n      var id = e.target.getAttribute(\"idtask\");\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.state.objList[0].data[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var task = _step.value;\n\n          if (task.id_task === Number.parseInt(id)) {\n            this.setState({\n              objSelected: task\n            });\n            break;\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"completeTask\",\n    value: function completeTask(e) {\n      var selId = e.target.parentNode.getAttribute(\"idtask\");\n\n      if (selId) {\n        var db = new Database();\n        var ctx = this;\n        var updObj;\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = this.state.objList[0].data[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var task = _step2.value;\n\n            if (task.id_task === Number.parseInt(selId)) {\n              updObj = task;\n              break;\n            }\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n\n        if (updObj) {\n          updObj.status = \"1\";\n          db.update(\"Task\", updObj).then(function (response) {\n            console.log(response);\n            ctx.getTasks();\n          });\n        }\n      }\n    }\n  }, {\n    key: \"removeTask\",\n    value: function removeTask(e) {\n      if (window.confirm('Are you sure you want to delete this task?')) {\n        var selId = e.target.parentNode.getAttribute(\"idtask\");\n\n        if (selId) {\n          var db = new Database();\n          var delObj = new Task(\"\", 1, 1, \"\", selId);\n          var ctx = this;\n          db.delete(\"Task\", delObj).then(function (response) {\n            console.log(response);\n            ctx.getTasks();\n          });\n        }\n      }\n    }\n  }, {\n    key: \"submitForm\",\n    value: function submitForm(obj) {\n      var db = new Database();\n      var ctx = this;\n      db.submit(\"Task\", obj).then(function reponseAction(response) {\n        console.log(response);\n        ctx.getTasks();\n      });\n    }\n  }, {\n    key: \"clearForm\",\n    value: function clearForm() {\n      var u = new Utils();\n      var updObj = new Task(\"\", 1, 1, u.getDate());\n      this.setState({\n        objSelected: updObj\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getTasks();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var clsBox = \"mainWrapper\";\n\n      if (this.state.objList) {\n        return React.createElement(\"div\", {\n          className: clsBox,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, React.createElement(TaskForm, {\n          submitForm: function submitForm(fn) {\n            return _this2.submitForm(fn);\n          },\n          clearForm: function clearForm(fn) {\n            return _this2.clearForm(fn);\n          },\n          changeForm: function changeForm(fn) {\n            return _this2.changeForm(fn);\n          },\n          objSelected: this.state.objSelected,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }), React.createElement(TaskList, {\n          objList: this.state.objList[0].data,\n          setSelected: function setSelected(fn) {\n            return _this2.setSelected(fn);\n          },\n          removeTask: function removeTask(fn) {\n            return _this2.removeTask(fn);\n          },\n          completeTask: function completeTask(fn) {\n            return _this2.completeTask(fn);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }));\n      } else {\n        return React.createElement(\"div\", {\n          className: clsBox,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, React.createElement(TaskForm, {\n          submitForm: function submitForm(fn) {\n            return _this2.submitForm(fn);\n          },\n          clearForm: function clearForm(fn) {\n            return _this2.clearForm(fn);\n          },\n          changeForm: function changeForm(fn) {\n            return _this2.changeForm(fn);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }));\n      }\n    }\n  }]);\n\n  return TaskFrame;\n}(React.Component);\nexport default TaskFrame;","map":{"version":3,"sources":["/home/gabriel/Documents/Projetos/Angular/TaskManager/client/react/src/components/TaskFrame.js"],"names":["React","Database","Select","TaskList","TaskForm","Task","Utils","TaskFrame","props","state","compName","objList","objSelected","getTasks","bind","callback","db","ctx","params","select","then","response","setState","e","id","target","getAttribute","data","task","id_task","Number","parseInt","selId","parentNode","updObj","status","update","console","log","window","confirm","delObj","delete","obj","submit","reponseAction","u","getDate","clsBox","fn","submitForm","clearForm","changeForm","setSelected","removeTask","completeTask","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Database } from '../model/database.js';\nimport { Select } from '../model/select.js';\nimport { TaskList } from './TaskList.js';\nimport { TaskForm } from './TaskForm.js';\nimport { Task } from '../model/task.js';\nimport { Utils } from '../model/utils.js';\nimport '../index.css';\n\nexport class TaskFrame extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            compName: \"Main\",\n            objList: null,\n            objSelected: null,\n        }\n        this.getTasks = this.getTasks.bind(this);\n    }\n\n    getTasks(callback) {\n        var db = new Database();\n        var ctx = this;\n        var params = new Select(\"status = 0\", 10, \"dueDate desc\");\n        db.select(\"Task\", params).then(function (response) {\n            ctx.setState({\n                objList: [response],\n                objSelected: null\n            });\n            if (callback) {\n                callback();\n            }\n        });\n    }\n\n    setSelected(e) {\n        var id = e.target.getAttribute(\"idtask\");\n        for (var task of this.state.objList[0].data) {\n          if (task.id_task === Number.parseInt(id)) {\n            this.setState({ objSelected: task });\n            break;\n          }\n        }\n    }\n\n    completeTask(e) {\n        var selId = e.target.parentNode.getAttribute(\"idtask\");\n        if (selId) {\n          var db = new Database();\n          var ctx = this;\n          var updObj;\n          for (var task of this.state.objList[0].data) {\n            if (task.id_task === Number.parseInt(selId)) {\n              updObj = task;\n              break;\n            }\n          }\n          if (updObj) {\n            updObj.status = \"1\";\n            db.update(\"Task\", updObj).then(\n              function (response) {\n                console.log(response);\n                ctx.getTasks();\n              }\n            );\n          }\n        }\n    }\n\n    removeTask(e) {\n        if (window.confirm('Are you sure you want to delete this task?')) {\n            var selId = e.target.parentNode.getAttribute(\"idtask\");\n            if (selId) {\n                var db = new Database();\n                var delObj = new Task(\"\", 1, 1, \"\", selId);\n                var ctx = this;\n                db.delete(\"Task\", delObj).then(\n                    function (response) {\n                        console.log(response);\n                        ctx.getTasks();\n                    }\n                );\n            }\n        }\n    }\n\n    submitForm(obj) {\n        var db = new Database();\n        var ctx = this;\n        db.submit(\"Task\", obj).then(\n          function reponseAction(response) {\n            console.log(response);\n            ctx.getTasks();\n          }\n        );\n    }\n\n    clearForm() {\n        var u = new Utils();\n        var updObj = new Task(\"\", 1, 1, u.getDate());\n        this.setState({\n            objSelected: updObj\n        });\n    }\n\n    componentDidMount() {\n        this.getTasks();\n    }\n\n    render() {\n        var clsBox = \"mainWrapper\";\n        if (this.state.objList) {\n            return <div className={clsBox}>\n                <TaskForm\n                    submitForm={fn => this.submitForm(fn)}\n                    clearForm={fn => this.clearForm(fn)}\n                    changeForm={fn => this.changeForm(fn)}\n                    objSelected={this.state.objSelected}\n                >\n                </TaskForm>\n                <TaskList\n                    objList={this.state.objList[0].data}\n                    setSelected={fn => this.setSelected(fn)}\n                    removeTask={fn => this.removeTask(fn)}\n                    completeTask={fn => this.completeTask(fn)}\n                ></TaskList>\n            </div>\n        } else {\n            return <div className={clsBox}>\n                <TaskForm\n                    submitForm={fn => this.submitForm(fn)}\n                    clearForm={fn => this.clearForm(fn)}\n                    changeForm={fn => this.changeForm(fn)}\n                >\n                </TaskForm>\n            </div>\n        }\n    }\n}\n\nexport default TaskFrame;"]},"metadata":{},"sourceType":"module"}